{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Fragment, useState } from \"react\"; //redux\n\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { setAdultArray, setChild1, setChild2, setChildArray, setInfant, setRooms, setSelValues, setTotal } from \"../redux/rooms/action\"; //UI Libraries\n\nimport { MdKeyboardArrowDown } from \"react-icons/md\";\nimport { MDBDropdown, MDBDropdownToggle, MDBDropdownMenu, MDBDropdownItem } from \"mdbreact\";\nimport { Label, Input, Button, FormGroup } from \"reactstrap\"; //used for room menu\n\nclass Counter extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"increamentClicks\", () => {\n      let id = this.props.id;\n      this.props.increament(id);\n    });\n\n    _defineProperty(this, \"decreamentClicks\", () => {\n      let id = this.props.id;\n      this.props.decreament(id);\n    });\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      className: \"counter\"\n    }, __jsx(\"button\", {\n      className: \"btn counter-btn\",\n      onClick: this.increamentClicks\n    }, \"+\"), __jsx(\"span\", null, this.props.count), __jsx(\"button\", {\n      className: \"btn counter-btn\",\n      onClick: this.decreamentClicks\n    }, \"-\"));\n  }\n\n} //used for room menu\n\n\nclass ChildCounter extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"increamentClicks\", () => {\n      let id = this.props.id;\n      this.props.increament(id);\n    });\n\n    _defineProperty(this, \"decreamentClicks\", () => {\n      let id = this.props.id;\n      this.props.decreament(id);\n    });\n\n    this.state = {\n      selValues: []\n    };\n    this.createUI = this.createUI.bind(this);\n  }\n\n  componentDidUpdate(prevProps) {\n    // Typical usage (don't forget to compare props):\n    if (this.props.selValues !== prevProps.selValues) {\n      this.setState({\n        selValues: this.props.selValues.filter(value => value.id === this.props.id)\n      });\n    }\n  }\n\n  handleChangeSelectValues(i, e) {\n    let roomId = this.props.id; //room index\n\n    let ageValue = e.target.value; //age index\n\n    this.props.changeSelValue(roomId, i, ageValue);\n  }\n\n  createUI() {\n    return this.props.selValues[this.props.id].age.map((el, index) => __jsx(\"div\", {\n      key: index\n    }, __jsx(FormGroup, {\n      className: \"add-age\"\n    }, __jsx(Label, {\n      for: \"exampleSelect\"\n    }, \"\\u0633\\u0646 \\u06A9\\u0648\\u062F\\u06A9 \", index + 1), __jsx(Input, {\n      type: \"select\",\n      value: el,\n      name: \"select\",\n      onChange: this.handleChangeSelectValues.bind(this, index),\n      id: \"exampleSelect\"\n    }, __jsx(\"option\", {\n      value: \"0\"\n    }, \"\\u062A\\u0627 1 \\u0633\\u0627\\u0644\"), __jsx(\"option\", {\n      value: \"1\"\n    }, \"1 \\u062A\\u0627 2 \\u0633\\u0627\\u0644\"), __jsx(\"option\", {\n      value: \"2\"\n    }, \"2 \\u062A\\u0627 3 \\u0633\\u0627\\u0644\"), __jsx(\"option\", {\n      value: \"3\"\n    }, \"3 \\u062A\\u0627 4 \\u0633\\u0627\\u0644\"), __jsx(\"option\", {\n      value: \"4\"\n    }, \"4 \\u062A\\u0627 5 \\u0633\\u0627\\u0644\"), __jsx(\"option\", {\n      value: \"5\"\n    }, \"5 \\u062A\\u0627 6 \\u0633\\u0627\\u0644\"), __jsx(\"option\", {\n      value: \"6\"\n    }, \"6 \\u062A\\u0627 7 \\u0633\\u0627\\u0644\"), __jsx(\"option\", {\n      value: \"7\"\n    }, \"7 \\u062A\\u0627 8 \\u0633\\u0627\\u0644\"), __jsx(\"option\", {\n      value: \"8\"\n    }, \"8 \\u062A\\u0627 9 \\u0633\\u0627\\u0644\"), __jsx(\"option\", {\n      value: \"9\"\n    }, \"9 \\u062A\\u0627 10 \\u0633\\u0627\\u0644\"), __jsx(\"option\", {\n      value: \"10\"\n    }, \"10 \\u062A\\u0627 11 \\u0633\\u0627\\u0644\"), __jsx(\"option\", {\n      value: \"11\"\n    }, \"11 \\u062A\\u0627 12 \\u0633\\u0627\\u0644\")))));\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      className: \"counter\"\n    }, __jsx(\"button\", {\n      className: \"btn counter-btn\",\n      onClick: this.increamentClicks\n    }, \"+\"), __jsx(\"span\", null, this.props.count), __jsx(\"button\", {\n      className: \"btn counter-btn\",\n      onClick: this.decreamentClicks\n    }, \"-\"), this.createUI());\n  }\n\n}\n\nconst Rooms = props => {\n  const dispatch = useDispatch();\n  const rooms = useSelector(state => state.roomsReducer.rooms);\n  const inc1 = useSelector(state => state.roomsReducer.adultArray);\n  const inc2 = useSelector(state => state.roomsReducer.childArray);\n  const selValues = useSelector(state => state.roomsReducer.selValues);\n  const total = useSelector(state => state.roomsReducer.total);\n  const infantCount = useSelector(state => state.roomsReducer.infantCount);\n  const child1Count = useSelector(state => state.roomsReducer.child1Count);\n  const child2Count = useSelector(state => state.roomsReducer.child2Count);\n  var roomArr = [];\n\n  function removeRooms() {\n    //adult person\n    let tempInc1 = inc1;\n    let tempAdult;\n    tempAdult = tempInc1.pop();\n    dispatch(setAdultArray(tempInc1)); //child person\n\n    let tempInc2 = inc2;\n    let tempChild;\n    tempChild = tempInc2.pop();\n    dispatch(setChildArray(tempInc2)); //rooms\n\n    dispatch(setRooms(rooms - 1));\n    dispatch(setTotal(total - tempChild - tempAdult));\n    let tempSelValues = selValues;\n    tempSelValues = selValues.filter(value => value.id !== rooms - 1);\n    dispatch(setSelValues(tempSelValues));\n    let removeRoomArray = selValues.filter(value => value.id == rooms - 1);\n    let removeRoomArrayAge = removeRoomArray[0].age;\n    let numOfInfant = 0;\n    let numOfChild1 = 0;\n    let numOfChild2 = 0;\n\n    for (var j = 0; j < removeRoomArrayAge.length; j++) {\n      if (removeRoomArrayAge[j] === 0 || removeRoomArrayAge[j] === 1) {\n        numOfInfant++;\n      } else if (removeRoomArrayAge[j] === 2 || removeRoomArrayAge[j] === 3 || removeRoomArrayAge[j] === 4 || removeRoomArrayAge[j] === 5) {\n        numOfChild1++;\n      } else if (removeRoomArrayAge[j] === 6 || removeRoomArrayAge[j] === 7 || removeRoomArrayAge[j] === 8 || removeRoomArrayAge[j] === 9 || removeRoomArrayAge[j] === 10 || removeRoomArrayAge[j] === 11) {\n        numOfChild2++;\n      }\n    }\n\n    dispatch(setInfant(parseInt(infantCount) - numOfInfant));\n    dispatch(setChild1(parseInt(child1Count) - numOfChild1));\n    dispatch(setChild2(parseInt(child2Count) - numOfChild2));\n  }\n\n  function addRooms() {\n    //adult person\n    let tempInc1 = [...inc1, 1];\n    dispatch(setAdultArray(tempInc1)); //child person\n\n    let tempInc2 = [...inc2, 0];\n    dispatch(setChildArray(tempInc2)); //rooms\n\n    dispatch(setRooms(rooms + 1));\n    dispatch(setTotal(1 + total));\n    let tempSelValues = selValues;\n    tempSelValues.push({\n      id: rooms,\n      adult: 1,\n      age: []\n    });\n    dispatch(setSelValues(tempSelValues));\n  }\n\n  function handleIncreamentA(i) {\n    let valueInc1 = inc1;\n    valueInc1[i] = inc1[i] + 1;\n    dispatch(setAdultArray(valueInc1));\n    dispatch(setTotal(total + 1));\n    let arrSel = selValues;\n    let arrAge = selValues.filter(value => value.id === i);\n\n    if (arrAge.length > 0) {\n      let newObj = {\n        id: i,\n        adult: valueInc1[i],\n        age: arrAge[0].age\n      };\n      arrSel.splice(i, 1, newObj);\n    }\n\n    dispatch(setSelValues(arrSel));\n  }\n\n  function handleIncreamentB(i) {\n    let valueInc2 = inc2;\n    valueInc2[i] = inc2[i] + 1;\n    dispatch(setChildArray(valueInc2));\n    dispatch(setTotal(total + 1));\n    let arrSel = selValues;\n    let arrAge = selValues.filter(value => value.id === i);\n    let newObj = {};\n\n    if (arrAge.length > 0) {\n      arrAge[0].age.push(0);\n      newObj = {\n        id: i,\n        adult: inc1[i],\n        age: arrAge[0].age\n      }; //infant first value option\n    } else {\n      newObj = {\n        id: i,\n        adult: inc1[i],\n        age: [0]\n      }; //infant first value option\n    }\n\n    dispatch(setInfant(infantCount + 1));\n    arrSel.splice(i, 1, newObj);\n    dispatch(setSelValues(arrSel));\n  }\n\n  function handleDecreamentA(i) {\n    if (inc1[i] > 1) {\n      let valueInc1 = inc1;\n      valueInc1[i] = inc1[i] - 1;\n      dispatch(setAdultArray(valueInc1));\n      dispatch(setTotal(total - 1));\n      let arrSel = selValues;\n      let arrAge = selValues.filter(value => value.id === i);\n\n      if (arrAge.length > 0) {\n        let newObj = {\n          id: i,\n          adult: valueInc1[i],\n          age: arrAge[0].age\n        };\n        arrSel.splice(i, 1, newObj);\n      }\n\n      dispatch(setSelValues(arrSel));\n    }\n  }\n\n  function handleDecreamentB(i) {\n    if (inc2[i] > 0) {\n      let valueInc2 = inc2;\n      valueInc2[i] = inc2[i] - 1;\n      dispatch(setChildArray(valueInc2));\n      dispatch(setTotal(total - 1));\n      let arrSel = selValues;\n      let arrAge = selValues.filter(value => value.id === i);\n\n      if (arrAge.length > 0) {\n        let childAge = arrAge[0].age.pop();\n\n        if (childAge === 0 || childAge === 1) {\n          dispatch(setInfant(parseInt(infantCount) - 1));\n        } else if (childAge === 2 || childAge === 3 || childAge === 4 || childAge === 5) {\n          dispatch(setChild1(parseInt(child1Count) - 1));\n        } else if (childAge === 6 || childAge === 7 || childAge === 8 || childAge === 9 || childAge === 10 || childAge === 11) {\n          dispatch(setChild2(parseInt(child2Count) - 1));\n        }\n\n        let newObj = {\n          id: i,\n          adult: inc1[i],\n          age: arrAge[0].age\n        };\n        arrSel.splice(i, 1, newObj);\n        dispatch(setSelValues(arrSel));\n      }\n    }\n  }\n\n  function changeSelValue(roomId, ageId, ageValue) {\n    let rooms = selValues;\n    let room = selValues.filter(arr => arr.id === roomId); //set Count of childs\n\n    if (parseInt(room[0].age[ageId]) === 0) dispatch(setInfant(infantCount - 1));\n    if (parseInt(room[0].age[ageId]) === 1) dispatch(setChild1(child1Count - 1));\n    if (parseInt(room[0].age[ageId]) === 2) dispatch(setChild2(child2Count - 1));\n\n    if (parseInt(ageValue) === 0 || parseInt(ageValue) === 1) {\n      dispatch(setInfant(infantCount + 1));\n    }\n\n    if (parseInt(ageValue) === 2 || parseInt(ageValue) === 3 || parseInt(ageValue) === 4 || parseInt(ageValue) === 5) {\n      dispatch(setChild1(child1Count + 1));\n    }\n\n    if (parseInt(ageValue) === 6 || parseInt(ageValue) === 7 || parseInt(ageValue) === 8 || parseInt(ageValue) === 9 || parseInt(ageValue) === 10 || parseInt(ageValue) === 11) {\n      dispatch(setChild2(child2Count + 1));\n    }\n\n    room[0].age[ageId] = parseInt(ageValue);\n    rooms.splice(roomId, 1, room[0]);\n    dispatch(setSelValues(rooms));\n  } //room menu structure\n\n\n  for (var i = 0; i < rooms; i++) {\n    let inc1Count = inc1[i];\n    let inc2Count = inc2[i];\n    roomArr.push(__jsx(\"div\", {\n      className: \"push-room\"\n    }, __jsx(\"hr\", null), __jsx(\"p\", {\n      className: \"room-label\"\n    }, \"\\u0627\\u062A\\u0627\\u0642 \", i + 1), __jsx(\"div\", {\n      className: \"line-counter\"\n    }, __jsx(\"span\", {\n      className: \"label\"\n    }, \"\\u0628\\u0632\\u0631\\u06AF\\u0633\\u0627\\u0644\"), __jsx(Counter, {\n      count: inc1Count,\n      id: i,\n      increament: handleIncreamentA,\n      decreament: handleDecreamentA\n    })), __jsx(\"div\", {\n      className: \"line-counter\"\n    }, __jsx(\"span\", {\n      className: \"label\"\n    }, \"\\u06A9\\u0648\\u062F\\u06A9\"), __jsx(\"div\", {\n      className: \"child-age\"\n    }, __jsx(ChildCounter, {\n      changeSelValue: (roomId, ageId, ageValue) => changeSelValue(roomId, ageId, ageValue),\n      count: inc2Count,\n      id: i,\n      selValues: selValues,\n      increament: handleIncreamentB,\n      decreament: handleDecreamentB\n    })))));\n  }\n\n  return __jsx(Fragment, null, __jsx(MDBDropdown, {\n    size: \"sm\",\n    className: \"passenger-number\"\n  }, __jsx(MDBDropdownToggle, {\n    caret: true\n  }, \"\\u0645\\u0633\\u0627\\u0641\\u0631\\u0627\\u0646 + \\u0627\\u062A\\u0627\\u0642\", __jsx(\"span\", {\n    className: \"total-num\"\n  }, total, \" \\u0645\\u0633\\u0627\\u0641\\u0631\"), __jsx(\"span\", {\n    className: \"total-num\"\n  }, rooms, \" \\u0627\\u062A\\u0627\\u0642\"), __jsx(MdKeyboardArrowDown, null)), __jsx(MDBDropdownMenu, {\n    className: \"dropdown-counter\",\n    color: \"danger\",\n    basic: true\n  }, __jsx(\"div\", {\n    className: \"add-room\"\n  }, __jsx(Button, {\n    color: \"secondary\",\n    size: \"sm\",\n    onClick: addRooms,\n    className: \"add-btn\"\n  }, \"\\u0627\\u0641\\u0632\\u0648\\u062F\\u0646 \\u0627\\u062A\\u0627\\u0642\"), roomArr.map((value, k) => {\n    return __jsx(\"div\", {\n      key: k\n    }, value);\n  }), rooms > 1 ? __jsx(\"div\", null, __jsx(\"hr\", null), __jsx(Button, {\n    color: \"secondary\",\n    size: \"sm\",\n    onClick: removeRooms,\n    className: \"add-btn\"\n  }, \"\\u062D\\u0630\\u0641 \\u0627\\u062A\\u0627\\u0642\")) : __jsx(\"span\", null), __jsx(MDBDropdownItem, {\n    className: \"done-btn\",\n    type: \"button\"\n  }, \"\\u062A\\u0627\\u06CC\\u06CC\\u062F\")))));\n};\n\nexport default Rooms;","map":{"version":3,"sources":["C:/Users/Hope/Desktop/KiteSearchEngine/components/rooms.js"],"names":["React","Fragment","useState","useSelector","useDispatch","setAdultArray","setChild1","setChild2","setChildArray","setInfant","setRooms","setSelValues","setTotal","MdKeyboardArrowDown","MDBDropdown","MDBDropdownToggle","MDBDropdownMenu","MDBDropdownItem","Label","Input","Button","FormGroup","Counter","Component","id","props","increament","decreament","render","increamentClicks","count","decreamentClicks","ChildCounter","constructor","state","selValues","createUI","bind","componentDidUpdate","prevProps","setState","filter","value","handleChangeSelectValues","i","e","roomId","ageValue","target","changeSelValue","age","map","el","index","Rooms","dispatch","rooms","roomsReducer","inc1","adultArray","inc2","childArray","total","infantCount","child1Count","child2Count","roomArr","removeRooms","tempInc1","tempAdult","pop","tempInc2","tempChild","tempSelValues","removeRoomArray","removeRoomArrayAge","numOfInfant","numOfChild1","numOfChild2","j","length","parseInt","addRooms","push","adult","handleIncreamentA","valueInc1","arrSel","arrAge","newObj","splice","handleIncreamentB","valueInc2","handleDecreamentA","handleDecreamentB","childAge","ageId","room","arr","inc1Count","inc2Count","k"],"mappings":"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","sourcesContent":["import React, { Fragment, useState } from \"react\";\r\n\r\n//redux\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport {\r\n  setAdultArray,\r\n  setChild1,\r\n  setChild2,\r\n  setChildArray,\r\n  setInfant,\r\n  setRooms,\r\n  setSelValues,\r\n  setTotal\r\n} from \"../redux/rooms/action\";\r\n\r\n//UI Libraries\r\nimport { MdKeyboardArrowDown } from \"react-icons/md\";\r\nimport {\r\n  MDBDropdown,\r\n  MDBDropdownToggle,\r\n  MDBDropdownMenu,\r\n  MDBDropdownItem\r\n} from \"mdbreact\";\r\nimport { Label, Input, Button, FormGroup } from \"reactstrap\";\r\n\r\n//used for room menu\r\nclass Counter extends React.Component {\r\n  increamentClicks = () => {\r\n    let id = this.props.id;\r\n    this.props.increament(id);\r\n  };\r\n\r\n  decreamentClicks = () => {\r\n    let id = this.props.id;\r\n    this.props.decreament(id);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"counter\">\r\n        <button className=\"btn counter-btn\" onClick={this.increamentClicks}>\r\n          +\r\n        </button>\r\n        <span>{this.props.count}</span>\r\n        <button className=\"btn counter-btn\" onClick={this.decreamentClicks}>\r\n          -\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n//used for room menu\r\nclass ChildCounter extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { selValues: [] };\r\n    this.createUI = this.createUI.bind(this);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    // Typical usage (don't forget to compare props):\r\n    if (this.props.selValues !== prevProps.selValues) {\r\n      this.setState({\r\n        selValues: this.props.selValues.filter(\r\n          value => value.id === this.props.id\r\n        )\r\n      });\r\n    }\r\n  }\r\n\r\n  increamentClicks = () => {\r\n    let id = this.props.id;\r\n    this.props.increament(id);\r\n  };\r\n\r\n  decreamentClicks = () => {\r\n    let id = this.props.id;\r\n    this.props.decreament(id);\r\n  };\r\n\r\n  handleChangeSelectValues(i, e) {\r\n    let roomId = this.props.id; //room index\r\n    let ageValue = e.target.value; //age index\r\n    this.props.changeSelValue(roomId, i, ageValue);\r\n  }\r\n\r\n  createUI() {\r\n    return this.props.selValues[this.props.id].age.map((el, index) => (\r\n      <div key={index}>\r\n        <FormGroup className=\"add-age\">\r\n          <Label for=\"exampleSelect\">سن کودک {index + 1}</Label>\r\n          <Input\r\n            type=\"select\"\r\n            value={el}\r\n            name=\"select\"\r\n            onChange={this.handleChangeSelectValues.bind(this, index)}\r\n            id=\"exampleSelect\"\r\n          >\r\n            <option value=\"0\">تا 1 سال</option>\r\n            <option value=\"1\">1 تا 2 سال</option>\r\n            <option value=\"2\">2 تا 3 سال</option>\r\n            <option value=\"3\">3 تا 4 سال</option>\r\n            <option value=\"4\">4 تا 5 سال</option>\r\n            <option value=\"5\">5 تا 6 سال</option>\r\n            <option value=\"6\">6 تا 7 سال</option>\r\n            <option value=\"7\">7 تا 8 سال</option>\r\n            <option value=\"8\">8 تا 9 سال</option>\r\n            <option value=\"9\">9 تا 10 سال</option>\r\n            <option value=\"10\">10 تا 11 سال</option>\r\n            <option value=\"11\">11 تا 12 سال</option>\r\n          </Input>\r\n        </FormGroup>\r\n      </div>\r\n    ));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"counter\">\r\n        <button className=\"btn counter-btn\" onClick={this.increamentClicks}>\r\n          +\r\n        </button>\r\n        <span>{this.props.count}</span>\r\n        <button className=\"btn counter-btn\" onClick={this.decreamentClicks}>\r\n          -\r\n        </button>\r\n        {this.createUI()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst Rooms = props => {\r\n  const dispatch = useDispatch();\r\n  const rooms = useSelector(state => state.roomsReducer.rooms);\r\n  const inc1 = useSelector(state => state.roomsReducer.adultArray);\r\n  const inc2 = useSelector(state => state.roomsReducer.childArray);\r\n  const selValues = useSelector(state => state.roomsReducer.selValues);\r\n  const total = useSelector(state => state.roomsReducer.total);\r\n  const infantCount = useSelector(state => state.roomsReducer.infantCount);\r\n  const child1Count = useSelector(state => state.roomsReducer.child1Count);\r\n  const child2Count = useSelector(state => state.roomsReducer.child2Count);\r\n  var roomArr = [];\r\n\r\n  function removeRooms() {\r\n    //adult person\r\n    let tempInc1 = inc1;\r\n    let tempAdult;\r\n    tempAdult = tempInc1.pop();\r\n    dispatch(setAdultArray(tempInc1));\r\n\r\n    //child person\r\n    let tempInc2 = inc2;\r\n    let tempChild;\r\n    tempChild = tempInc2.pop();\r\n    dispatch(setChildArray(tempInc2));\r\n\r\n    //rooms\r\n    dispatch(setRooms(rooms - 1));\r\n    dispatch(setTotal(total - tempChild - tempAdult));\r\n\r\n    let tempSelValues = selValues;\r\n    tempSelValues = selValues.filter(value => value.id !== rooms - 1);\r\n    dispatch(setSelValues(tempSelValues));\r\n\r\n    let removeRoomArray = selValues.filter(value => value.id == rooms - 1);\r\n    let removeRoomArrayAge = removeRoomArray[0].age;\r\n    let numOfInfant = 0;\r\n    let numOfChild1 = 0;\r\n    let numOfChild2 = 0;\r\n    for (var j = 0; j < removeRoomArrayAge.length; j++) {\r\n      if (removeRoomArrayAge[j] === 0 || removeRoomArrayAge[j] === 1) {\r\n        numOfInfant++;\r\n      } else if (\r\n        removeRoomArrayAge[j] === 2 ||\r\n        removeRoomArrayAge[j] === 3 ||\r\n        removeRoomArrayAge[j] === 4 ||\r\n        removeRoomArrayAge[j] === 5\r\n      ) {\r\n        numOfChild1++;\r\n      } else if (\r\n        removeRoomArrayAge[j] === 6 ||\r\n        removeRoomArrayAge[j] === 7 ||\r\n        removeRoomArrayAge[j] === 8 ||\r\n        removeRoomArrayAge[j] === 9 ||\r\n        removeRoomArrayAge[j] === 10 ||\r\n        removeRoomArrayAge[j] === 11\r\n      ) {\r\n        numOfChild2++;\r\n      }\r\n    }\r\n    dispatch(setInfant(parseInt(infantCount) - numOfInfant));\r\n    dispatch(setChild1(parseInt(child1Count) - numOfChild1));\r\n    dispatch(setChild2(parseInt(child2Count) - numOfChild2));\r\n  }\r\n\r\n  function addRooms() {\r\n    //adult person\r\n    let tempInc1 = [...inc1, 1];\r\n    dispatch(setAdultArray(tempInc1));\r\n\r\n    //child person\r\n    let tempInc2 = [...inc2, 0];\r\n    dispatch(setChildArray(tempInc2));\r\n\r\n    //rooms\r\n    dispatch(setRooms(rooms + 1));\r\n    dispatch(setTotal(1 + total));\r\n    let tempSelValues = selValues;\r\n    tempSelValues.push({ id: rooms, adult: 1, age: [] });\r\n    dispatch(setSelValues(tempSelValues));\r\n  }\r\n\r\n  function handleIncreamentA(i) {\r\n    let valueInc1 = inc1;\r\n    valueInc1[i] = inc1[i] + 1;\r\n    dispatch(setAdultArray(valueInc1));\r\n    dispatch(setTotal(total + 1));\r\n\r\n    let arrSel = selValues;\r\n    let arrAge = selValues.filter(value => value.id === i);\r\n    if (arrAge.length > 0) {\r\n      let newObj = { id: i, adult: valueInc1[i], age: arrAge[0].age };\r\n      arrSel.splice(i, 1, newObj);\r\n    }\r\n\r\n    dispatch(setSelValues(arrSel));\r\n  }\r\n\r\n  function handleIncreamentB(i) {\r\n    let valueInc2 = inc2;\r\n    valueInc2[i] = inc2[i] + 1;\r\n    dispatch(setChildArray(valueInc2));\r\n    dispatch(setTotal(total + 1));\r\n\r\n    let arrSel = selValues;\r\n    let arrAge = selValues.filter(value => value.id === i);\r\n    let newObj = {};\r\n    if (arrAge.length > 0) {\r\n      arrAge[0].age.push(0);\r\n      newObj = { id: i, adult: inc1[i], age: arrAge[0].age };\r\n      //infant first value option\r\n    } else {\r\n      newObj = { id: i, adult: inc1[i], age: [0] };\r\n      //infant first value option\r\n    }\r\n    dispatch(setInfant(infantCount + 1));\r\n    arrSel.splice(i, 1, newObj);\r\n    dispatch(setSelValues(arrSel));\r\n  }\r\n\r\n  function handleDecreamentA(i) {\r\n    if (inc1[i] > 1) {\r\n      let valueInc1 = inc1;\r\n      valueInc1[i] = inc1[i] - 1;\r\n      dispatch(setAdultArray(valueInc1));\r\n      dispatch(setTotal(total - 1));\r\n      let arrSel = selValues;\r\n      let arrAge = selValues.filter(value => value.id === i);\r\n      if (arrAge.length > 0) {\r\n        let newObj = { id: i, adult: valueInc1[i], age: arrAge[0].age };\r\n        arrSel.splice(i, 1, newObj);\r\n      }\r\n      dispatch(setSelValues(arrSel));\r\n    }\r\n  }\r\n\r\n  function handleDecreamentB(i) {\r\n    if (inc2[i] > 0) {\r\n      let valueInc2 = inc2;\r\n      valueInc2[i] = inc2[i] - 1;\r\n      dispatch(setChildArray(valueInc2));\r\n      dispatch(setTotal(total - 1));\r\n\r\n      let arrSel = selValues;\r\n      let arrAge = selValues.filter(value => value.id === i);\r\n      if (arrAge.length > 0) {\r\n        let childAge = arrAge[0].age.pop();\r\n        if (childAge === 0 || childAge === 1) {\r\n          dispatch(setInfant(parseInt(infantCount) - 1));\r\n        } else if (\r\n          childAge === 2 ||\r\n          childAge === 3 ||\r\n          childAge === 4 ||\r\n          childAge === 5\r\n        ) {\r\n          dispatch(setChild1(parseInt(child1Count) - 1));\r\n        } else if (\r\n          childAge === 6 ||\r\n          childAge === 7 ||\r\n          childAge === 8 ||\r\n          childAge === 9 ||\r\n          childAge === 10 ||\r\n          childAge === 11\r\n        ) {\r\n          dispatch(setChild2(parseInt(child2Count) - 1));\r\n        }\r\n        let newObj = { id: i, adult: inc1[i], age: arrAge[0].age };\r\n        arrSel.splice(i, 1, newObj);\r\n        dispatch(setSelValues(arrSel));\r\n      }\r\n    }\r\n  }\r\n\r\n  function changeSelValue(roomId, ageId, ageValue) {\r\n    let rooms = selValues;\r\n    let room = selValues.filter(arr => arr.id === roomId);\r\n\r\n    //set Count of childs\r\n    if (parseInt(room[0].age[ageId]) === 0)\r\n      dispatch(setInfant(infantCount - 1));\r\n    if (parseInt(room[0].age[ageId]) === 1)\r\n      dispatch(setChild1(child1Count - 1));\r\n    if (parseInt(room[0].age[ageId]) === 2)\r\n      dispatch(setChild2(child2Count - 1));\r\n\r\n    if (parseInt(ageValue) === 0 || parseInt(ageValue) === 1) {\r\n      dispatch(setInfant(infantCount + 1));\r\n    }\r\n    if (\r\n      parseInt(ageValue) === 2 ||\r\n      parseInt(ageValue) === 3 ||\r\n      parseInt(ageValue) === 4 ||\r\n      parseInt(ageValue) === 5\r\n    ) {\r\n      dispatch(setChild1(child1Count + 1));\r\n    }\r\n    if (\r\n      parseInt(ageValue) === 6 ||\r\n      parseInt(ageValue) === 7 ||\r\n      parseInt(ageValue) === 8 ||\r\n      parseInt(ageValue) === 9 ||\r\n      parseInt(ageValue) === 10 ||\r\n      parseInt(ageValue) === 11\r\n    ) {\r\n      dispatch(setChild2(child2Count + 1));\r\n    }\r\n\r\n    room[0].age[ageId] = parseInt(ageValue);\r\n    rooms.splice(roomId, 1, room[0]);\r\n    dispatch(setSelValues(rooms));\r\n  }\r\n  //room menu structure\r\n  for (var i = 0; i < rooms; i++) {\r\n    let inc1Count = inc1[i];\r\n    let inc2Count = inc2[i];\r\n    roomArr.push(\r\n      <div className=\"push-room\">\r\n        <hr />\r\n        <p className=\"room-label\">اتاق {i + 1}</p>\r\n        <div className=\"line-counter\">\r\n          <span className=\"label\">بزرگسال</span>\r\n          <Counter\r\n            count={inc1Count}\r\n            id={i}\r\n            increament={handleIncreamentA}\r\n            decreament={handleDecreamentA}\r\n          />\r\n        </div>\r\n        <div className=\"line-counter\">\r\n          <span className=\"label\">کودک</span>\r\n          <div className=\"child-age\">\r\n            <ChildCounter\r\n              changeSelValue={(roomId, ageId, ageValue) =>\r\n                changeSelValue(roomId, ageId, ageValue)\r\n              }\r\n              count={inc2Count}\r\n              id={i}\r\n              selValues={selValues}\r\n              increament={handleIncreamentB}\r\n              decreament={handleDecreamentB}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <MDBDropdown size=\"sm\" className=\"passenger-number\">\r\n        <MDBDropdownToggle caret>\r\n          مسافران + اتاق\r\n          <span className=\"total-num\">{total} مسافر</span>\r\n          <span className=\"total-num\">{rooms} اتاق</span>\r\n          <MdKeyboardArrowDown />\r\n        </MDBDropdownToggle>\r\n        <MDBDropdownMenu className=\"dropdown-counter\" color=\"danger\" basic>\r\n          <div className=\"add-room\">\r\n            <Button\r\n              color=\"secondary\"\r\n              size=\"sm\"\r\n              onClick={addRooms}\r\n              className=\"add-btn\"\r\n            >\r\n              افزودن اتاق\r\n            </Button>\r\n\r\n            {roomArr.map((value, k) => {\r\n              return <div key={k}>{value}</div>;\r\n            })}\r\n\r\n            {rooms > 1 ? (\r\n              <div>\r\n                <hr />\r\n                <Button\r\n                  color=\"secondary\"\r\n                  size=\"sm\"\r\n                  onClick={removeRooms}\r\n                  className=\"add-btn\"\r\n                >\r\n                  حذف اتاق\r\n                </Button>\r\n              </div>\r\n            ) : (\r\n              <span></span>\r\n            )}\r\n            <MDBDropdownItem className=\"done-btn\" type=\"button\">\r\n              تایید\r\n            </MDBDropdownItem>\r\n          </div>\r\n        </MDBDropdownMenu>\r\n      </MDBDropdown>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Rooms;\r\n"]},"metadata":{},"sourceType":"module"}