{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nvar __jsx = React.createElement;\nimport React, { Fragment, useEffect, useState } from \"react\"; //redux\n\nimport { connect, useSelector, useDispatch } from \"react-redux\";\nimport { add_org_id, add_des_id } from \"../redux/basicdatas/action\";\nimport { loadCity } from \"../redux/cityList/action\"; //UI Libraries\n\nimport { FaExchangeAlt, FaRegCalendarAlt } from \"react-icons/fa\";\nimport { IoIosAirplane } from \"react-icons/io\";\nimport { MdKeyboardArrowDown } from \"react-icons/md\";\nimport { MdLens } from \"react-icons/md\";\nimport { InputGroup, InputGroupAddon, InputGroupText, Button, Container, Row, Col } from \"reactstrap\";\nimport { makeStyles, InputLabel, MenuItem, FormControl, Select, Chip, TextField } from \"@material-ui/core\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport DatePicker from \"react-modern-calendar-datepicker\"; //components\n\nimport RoundButton from \"./roundbutton\";\nimport Rooms from './rooms'; //utilities\n\nimport { DotLoading } from \"../Functions\"; //css\n\nimport 'react-modern-calendar-datepicker/lib/DatePicker.css';\n;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    button: {\n      display: \"block\",\n      marginTop: theme.spacing(2)\n    },\n    formControl: {\n      margin: theme.spacing(1),\n      minWidth: 120\n    }\n  };\n});\n\nvar SearchBoxTour = function SearchBoxTour(props) {\n  var _jsx;\n\n  var classes = useStyles();\n\n  var _useState = useState(false),\n      showChild = _useState[0],\n      setShowChild = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      tourCategory = _useState2[0],\n      setTourCategory = _useState2[1];\n\n  var _useState3 = useState([\"\"]),\n      valueOrigin = _useState3[0],\n      setValueOrigin = _useState3[1];\n\n  var _useState4 = useState(0),\n      cityIdOrg = _useState4[0],\n      setCityIdOrg = _useState4[1];\n\n  var _useState5 = useState(0),\n      cityIdDes = _useState5[0],\n      setCityIdDes = _useState5[1];\n\n  var _useState6 = useState(\"\"),\n      valueDestination = _useState6[0],\n      setValueDestination = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      originString = _useState7[0],\n      setOriginString = _useState7[1];\n\n  var _useState8 = useState(\"\"),\n      destinationString = _useState8[0],\n      setDestinationString = _useState8[1];\n\n  var _useState9 = useState(false),\n      open = _useState9[0],\n      setOpen = _useState9[1];\n\n  var _useState10 = useState(null),\n      selectedDayOrg = _useState10[0],\n      setSelectedDayOrg = _useState10[1];\n\n  var _useState11 = useState(null),\n      selectedDayDes = _useState11[0],\n      setSelectedDayDes = _useState11[1];\n\n  var cityList = useSelector(function (state) {\n    return state.cityListReducer.cityList;\n  });\n  var dispatch = useDispatch();\n  var rooms = useSelector(function (state) {\n    return state.roomsReducer.rooms;\n  });\n  var inc1 = useSelector(function (state) {\n    return state.roomsReducer.adultArray;\n  });\n  var inc2 = useSelector(function (state) {\n    return state.roomsReducer.childArray;\n  });\n  var selValues = useSelector(function (state) {\n    return state.roomsReducer.selValues;\n  });\n  var total = useSelector(function (state) {\n    return state.roomsReducer.total;\n  });\n  var infantCount = useSelector(function (state) {\n    return state.roomsReducer.infantCount;\n  });\n  var child1Count = useSelector(function (state) {\n    return state.roomsReducer.child1Count;\n  });\n  var child2Count = useSelector(function (state) {\n    return state.roomsReducer.child2Count;\n  }); //tour type select box\n\n  var handleChange = function handleChange(event) {\n    setTourCategory(event.target.value);\n  }; //tour type select box\n\n\n  var handleClose = function handleClose() {\n    setOpen(false);\n  }; //tour type select box\n\n\n  var handleOpen = function handleOpen() {\n    setOpen(true);\n  };\n\n  useEffect(function () {\n    //reed cityList from api\n    dispatch(loadCity());\n    setShowChild(true);\n  }, []);\n\n  function getOptionSelectedOrigin(event, newValue) {\n    setValueOrigin(newValue);\n    var str = \"\";\n    var ctId = []; //origin data structure \"TEH-ISF\"\n\n    for (var i = 0; i < newValue.length; i++) {\n      if (i === newValue.length - 1) str += newValue[i].CityAbbrevation;else str += newValue[i].CityAbbrevation + \"-\";\n      ctId.push(newValue[i].CityId);\n    }\n\n    setOriginString(str);\n    setCityIdOrg(ctId); //city orgId set in redux\n\n    props.dispatch(add_org_id(ctId));\n  }\n\n  function getOptionSelectedDestination(event, value) {\n    setValueDestination(value);\n    var str = \"\";\n    var ctId = []; //destination data structure \"TEH-ISF\"\n\n    for (var i = 0; i < value.length; i++) {\n      if (i === value.length - 1) str += value[i].CityAbbrevation;else str += value[i].CityAbbrevation + \"-\";\n      ctId.push(value[i].CityId);\n    }\n\n    setDestinationString(str);\n    setCityIdDes(ctId); //city desId set in redux\n\n    props.dispatch(add_des_id(ctId));\n  } //change destination and origin\n\n\n  function handleChangeOrgDes() {\n    var tempOrg = valueOrigin;\n    var tempDes = valueDestination;\n    var tempOrgStr = originString;\n    var tempDesStr = destinationString;\n    var tempOrgID = cityIdOrg;\n    var tempDesId = cityIdDes;\n    setCityIdOrg(tempDesId); //city orgId set in redux\n\n    props.dispatch(add_org_id(tempDesId));\n    setCityIdDes(tempOrgID); //city desId set in redux\n\n    props.dispatch(add_des_id(tempOrgID));\n    setOriginString(tempDesStr);\n    setDestinationString(tempOrgStr);\n    setValueOrigin(tempDes);\n    setValueDestination(tempOrg);\n  } //make day and month 2 figit :07/05\n\n\n  var dateOrigin = 0;\n  var dateDestination = 0;\n  var zero = \"0\";\n\n  if (selectedDayOrg !== null) {\n    var orgD = selectedDayOrg.day.toString().length === 1 ? zero.toString().concat(selectedDayOrg.day.toString()).toString() : selectedDayOrg.day;\n    var orgM = selectedDayOrg.month.toString().length === 1 ? \"0\".concat(selectedDayOrg.month) : selectedDayOrg.month;\n    dateOrigin = selectedDayOrg.year + \"-\" + orgM + \"-\" + orgD;\n  }\n\n  if (selectedDayDes !== null) {\n    var desD = selectedDayDes.day.toString().length === 1 ? \"0\".concat(selectedDayDes.day) : selectedDayDes.day;\n    var desM = selectedDayDes.month.toString().length === 1 ? \"0\".concat(selectedDayDes.month) : selectedDayDes.month;\n    dateDestination = selectedDayDes.year + \"-\" + desM + \"-\" + desD;\n  }\n\n  var adultCount = inc1.reduce(function myFunc(a, b) {\n    return a + b;\n  });\n  var roomRules = \"\";\n\n  for (var i = 0; i < selValues.length; i++) {\n    var adult = selValues[i].adult;\n    var infant = 0;\n    var child1 = 0;\n    var child2 = 0;\n\n    for (var j = 0; j < selValues[i].age.length; j++) {\n      if (selValues[i].age[j] === 0 || selValues[i].age[j] === 1) {\n        infant = infant + 1;\n      }\n\n      if (selValues[i].age[j] === 2 || selValues[i].age[j] === 3 || selValues[i].age[j] === 4 || selValues[i].age[j] === 5) {\n        child1 = child1 + 1;\n      }\n\n      if (selValues[i].age[j] === 6 || selValues[i].age[j] === 7 || selValues[i].age[j] === 8 || selValues[i].age[j] === 9 || selValues[i].age[j] === 10 || selValues[i].age[j] === 11) {\n        child2 = child2 + 1;\n      }\n    }\n\n    var einRoom = adult.toString().concat(child1.toString(), child2.toString(), infant.toString());\n    if (roomRules === \"\") roomRules = roomRules.concat(einRoom);else roomRules = roomRules.concat(\",\", einRoom);\n  }\n\n  var searchParams = {\n    org: originString,\n    des: destinationString,\n    adult: adultCount,\n    infant: infantCount,\n    child1: child1Count,\n    child2: child2Count,\n    selValues: _JSON$stringify(selValues),\n    roomCount: rooms,\n    roomRules: roomRules.toString(),\n    orgDate: dateOrigin.toString(),\n    desDate: dateDestination.toString(),\n    tourCategory: tourCategory\n  };\n  if (!showChild) return __jsx(DotLoading, null);\n  return __jsx(Fragment, null, __jsx(\"div\", {\n    className: \"inputgroups\"\n  }, __jsx(Container, null, __jsx(Row, null, __jsx(Col, {\n    md: \"6\",\n    className: \"airport-col no-padding\"\n  }, __jsx(InputGroup, null, __jsx(Autocomplete, (_jsx = {\n    id: \"fixed-tags-demo\",\n    className: \"airport-auto form-control\",\n    multiple: true,\n    options: cityList,\n    filterSelectedOptions: true,\n    onChange: function onChange(event, newValue) {\n      return getOptionSelectedOrigin(event, newValue);\n    },\n    groupBy: function groupBy(option) {\n      return option.CountryAbbrevation === \"IR\" ? \"شهرهای پرتردد\" : \"سایر شهرها\";\n    },\n    getOptionLabel: function getOptionLabel(option) {\n      return __jsx(\"div\", null, __jsx(MdLens, {\n        className: \"pl-1\",\n        size: \"10\",\n        color: \"#65bfbe\"\n      }), __jsx(\"span\", {\n        className: \"optionRight\"\n      }, option.CityTitle_Persian), __jsx(\"span\", {\n        className: \"optionLeft-autocomplete\"\n      }, option.CityAbbrevation));\n    },\n    renderTags: function renderTags(newValue, getTagProps) {\n      return newValue.map(function (option, index) {\n        return __jsx(Chip, _extends({\n          label: option.CityTitle_Persian\n        }, getTagProps({\n          index: index\n        }), {\n          key: index\n        }));\n      });\n    },\n    style: {\n      width: \"100%\",\n      fontFamily: \"IRANSansWeb\"\n    }\n  }, _defineProperty(_jsx, \"style\", {\n    width: 300\n  }), _defineProperty(_jsx, \"renderInput\", function renderInput(params) {\n    return __jsx(TextField, _extends({}, params, {\n      variant: \"outlined\",\n      fullWidth: true\n    }));\n  }), _jsx)), __jsx(InputGroupAddon, {\n    addonType: \"append\",\n    className: \"airport-append\"\n  }, __jsx(InputGroupText, null, __jsx(\"div\", {\n    className: \"source-plane\"\n  }, __jsx(IoIosAirplane, null)), \"\\u0645\\u0628\\u062F\\u0627\\u064C\\u061F\"))), __jsx(Button, {\n    onClick: handleChangeOrgDes,\n    className: \"input-btn\"\n  }, __jsx(FaExchangeAlt, null)), __jsx(InputGroup, {\n    className: \"airport-dest\"\n  }, __jsx(Autocomplete, {\n    className: \"airport-auto form-control\",\n    multiple: true,\n    filterSelectedOptions: true,\n    id: \"fixed-tags-2\",\n    options: cityList,\n    onChange: function onChange(e, value) {\n      return getOptionSelectedDestination(e, value);\n    },\n    groupBy: function groupBy(toption) {\n      return toption.CountryAbbrevation === \"IR\" ? \"شهرهای پرتردد\" : \"سایر شهرها\";\n    },\n    getOptionLabel: function getOptionLabel(option) {\n      return __jsx(\"div\", null, __jsx(MdLens, {\n        className: \"pl-1\",\n        size: \"10\",\n        color: \"#65bfbe\"\n      }), __jsx(\"span\", {\n        className: \"optionRight\"\n      }, option.CityTitle_Persian), __jsx(\"span\", {\n        className: \"optionLeft-autocomplete \"\n      }, option.CityAbbrevation));\n    } //defaultValue={[ top100Films[13]]}\n    // getOptionSelected={getSelectedAus(value)}\n    ,\n    renderTags: function renderTags(value, getTagProps) {\n      return value.map(function (option, index) {\n        return __jsx(Chip, _extends({\n          label: option.CityTitle_Persian\n        }, getTagProps({\n          index: index\n        }), {\n          key: index\n        }));\n      });\n    },\n    style: {\n      width: \"100%\",\n      fontFamily: \"IRANSansWeb\"\n    },\n    renderInput: function renderInput(params) {\n      return __jsx(TextField, _extends({}, params, {\n        variant: \"outlined\",\n        fullWidth: true\n      }));\n    }\n  }), __jsx(InputGroupAddon, {\n    addonType: \"append\",\n    className: \"airport-append\"\n  }, __jsx(InputGroupText, null, __jsx(\"div\", {\n    className: \"dest-plane\"\n  }, __jsx(IoIosAirplane, null)), \"\\u0645\\u0642\\u0635\\u062F\\u061F\")))), __jsx(Col, {\n    md: \"6\",\n    className: \"date-col no-padding\"\n  }, __jsx(InputGroup, null, __jsx(InputGroupAddon, {\n    addonType: \"append\"\n  }, __jsx(InputGroupText, null, __jsx(\"div\", {\n    className: \"calendar-icon\"\n  }, __jsx(FaRegCalendarAlt, null)), \"\\u062A\\u0627\\u0631\\u06CC\\u062E \\u0631\\u0641\\u062A\", __jsx(DatePicker, {\n    value: selectedDayOrg,\n    onChange: setSelectedDayOrg,\n    inputPlaceholder: \" \",\n    shouldHighlightWeekends: true,\n    locale: \"fa\"\n  })))), __jsx(InputGroup, null, __jsx(InputGroupAddon, {\n    addonType: \"append\"\n  }, __jsx(InputGroupText, null, __jsx(\"div\", {\n    className: \"calendar-icon\"\n  }, __jsx(FaRegCalendarAlt, null)), \"\\u062A\\u0627\\u0631\\u06CC\\u062E \\u0628\\u0631\\u06AF\\u0634\\u062A\", __jsx(DatePicker, {\n    value: selectedDayDes,\n    onChange: setSelectedDayDes,\n    inputPlaceholder: \" \",\n    shouldHighlightWeekends: true,\n    locale: \"fa\"\n  })))))))), __jsx(\"div\", {\n    className: \"search-dropdown\"\n  }, __jsx(Container, null, __jsx(Row, null, __jsx(Col, {\n    md: \"6\",\n    xs: \"6\"\n  }, __jsx(\"div\", {\n    className: \"tour-type right-to-left\"\n  }, __jsx(FormControl, {\n    className: classes.formControl\n  }, __jsx(InputLabel, {\n    id: \"demo-controlled-open-select-label\"\n  }, \"\\u0633\\u0628\\u06A9 \\u062A\\u0648\\u0631\"), __jsx(Select, {\n    labelId: \"demo-controlled-open-select-label\",\n    id: \"demo-controlled-open-select\",\n    open: open,\n    onClose: handleClose,\n    onOpen: handleOpen,\n    value: tourCategory,\n    onChange: handleChange\n  }, __jsx(MenuItem, {\n    value: \"\"\n  }, __jsx(\"em\", null, \"\\u0647\\u0645\\u0647 \\u0645\\u0648\\u0627\\u0631\\u062F\")), __jsx(MenuItem, {\n    value: 10\n  }, \"\\u062A\\u0641\\u0631\\u06CC\\u062D\\u06CC\"), __jsx(MenuItem, {\n    value: 20\n  }, \"\\u0637\\u0628\\u06CC\\u0639\\u062A \\u06AF\\u0631\\u062F\\u06CC\"), __jsx(MenuItem, {\n    value: 30\n  }, \"\\u0632\\u06CC\\u0627\\u0631\\u062A\\u06CC\")), __jsx(MdKeyboardArrowDown, null)))), __jsx(Col, {\n    md: \"6\",\n    xs: \"6\"\n  }, __jsx(Rooms, null))))), __jsx(RoundButton, {\n    searchParams: searchParams,\n    name: \"\\u062C\\u0633\\u062A\\u062C\\u0648\"\n  }));\n};\n\nexport default connect()(SearchBoxTour);","map":{"version":3,"sources":["C:/Users/Hope/Desktop/KiteSearchEngine/components/searchboxtour.js"],"names":["React","Fragment","useEffect","useState","connect","useSelector","useDispatch","add_org_id","add_des_id","loadCity","FaExchangeAlt","FaRegCalendarAlt","IoIosAirplane","MdKeyboardArrowDown","MdLens","InputGroup","InputGroupAddon","InputGroupText","Button","Container","Row","Col","makeStyles","InputLabel","MenuItem","FormControl","Select","Chip","TextField","Autocomplete","DatePicker","RoundButton","Rooms","DotLoading","useStyles","theme","button","display","marginTop","spacing","formControl","margin","minWidth","SearchBoxTour","props","classes","showChild","setShowChild","tourCategory","setTourCategory","valueOrigin","setValueOrigin","cityIdOrg","setCityIdOrg","cityIdDes","setCityIdDes","valueDestination","setValueDestination","originString","setOriginString","destinationString","setDestinationString","open","setOpen","selectedDayOrg","setSelectedDayOrg","selectedDayDes","setSelectedDayDes","cityList","state","cityListReducer","dispatch","rooms","roomsReducer","inc1","adultArray","inc2","childArray","selValues","total","infantCount","child1Count","child2Count","handleChange","event","target","value","handleClose","handleOpen","getOptionSelectedOrigin","newValue","str","ctId","i","length","CityAbbrevation","push","CityId","getOptionSelectedDestination","handleChangeOrgDes","tempOrg","tempDes","tempOrgStr","tempDesStr","tempOrgID","tempDesId","dateOrigin","dateDestination","zero","orgD","day","toString","concat","orgM","month","year","desD","desM","adultCount","reduce","myFunc","a","b","roomRules","adult","infant","child1","child2","j","age","einRoom","searchParams","org","des","roomCount","orgDate","desDate","option","CountryAbbrevation","CityTitle_Persian","getTagProps","map","index","width","fontFamily","params","e","toption"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\r\n\r\n//redux\r\nimport { connect, useSelector, useDispatch } from \"react-redux\";\r\nimport { add_org_id, add_des_id } from \"../redux/basicdatas/action\";\r\nimport { loadCity } from \"../redux/cityList/action\";\r\n\r\n//UI Libraries\r\nimport { FaExchangeAlt, FaRegCalendarAlt } from \"react-icons/fa\";\r\nimport { IoIosAirplane } from \"react-icons/io\";\r\nimport { MdKeyboardArrowDown } from \"react-icons/md\";\r\nimport { MdLens } from \"react-icons/md\";\r\nimport {\r\n  InputGroup,\r\n  InputGroupAddon,\r\n  InputGroupText,\r\n  Button,\r\n  Container,\r\n  Row,\r\n  Col\r\n} from \"reactstrap\";\r\nimport {\r\n  makeStyles,\r\n  InputLabel,\r\n  MenuItem,\r\n  FormControl,\r\n  Select,\r\n  Chip,\r\n  TextField\r\n} from \"@material-ui/core\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport DatePicker from \"react-modern-calendar-datepicker\";\r\n\r\n\r\n//components\r\nimport RoundButton from \"./roundbutton\";\r\nimport Rooms from './rooms'\r\n\r\n//utilities\r\nimport { DotLoading } from \"../Functions\";\r\n\r\n//css\r\nimport 'react-modern-calendar-datepicker/lib/DatePicker.css';;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  button: {\r\n    display: \"block\",\r\n    marginTop: theme.spacing(2)\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120\r\n  }\r\n}));\r\n\r\n\r\nconst SearchBoxTour = props => {\r\n  const classes = useStyles();\r\n  const [showChild, setShowChild] = useState(false);\r\n  const [tourCategory, setTourCategory] = useState(\"\");\r\n  const [valueOrigin, setValueOrigin] = useState([\"\"]);\r\n  const [cityIdOrg, setCityIdOrg] = useState(0);\r\n  const [cityIdDes, setCityIdDes] = useState(0);\r\n  const [valueDestination, setValueDestination] = useState(\"\");\r\n  const [originString, setOriginString] = useState(\"\");\r\n  const [destinationString, setDestinationString] = useState(\"\");\r\n  const [open, setOpen] = useState(false);\r\n  const [selectedDayOrg, setSelectedDayOrg] = useState(null);\r\n  const [selectedDayDes, setSelectedDayDes] = useState(null);\r\n  const cityList = useSelector(state => state.cityListReducer.cityList);\r\n  const dispatch = useDispatch();\r\n  const rooms = useSelector(state => state.roomsReducer.rooms);\r\n  const inc1 = useSelector(state => state.roomsReducer.adultArray);\r\n  const inc2 = useSelector(state => state.roomsReducer.childArray);\r\n  const selValues = useSelector(state => state.roomsReducer.selValues);\r\n  const total = useSelector(state => state.roomsReducer.total);\r\n  const infantCount = useSelector(state => state.roomsReducer.infantCount);\r\n  const child1Count = useSelector(state => state.roomsReducer.child1Count);\r\n  const child2Count = useSelector(state => state.roomsReducer.child2Count);\r\n\r\n  //tour type select box\r\n  const handleChange = event => {\r\n    setTourCategory(event.target.value);\r\n  };\r\n\r\n  //tour type select box\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  //tour type select box\r\n  const handleOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    //reed cityList from api\r\n    dispatch(loadCity());\r\n    setShowChild(true);\r\n  }, []);\r\n\r\n\r\n  function getOptionSelectedOrigin(event, newValue) {\r\n    setValueOrigin(newValue);\r\n    let str = \"\";\r\n    let ctId = [];\r\n    //origin data structure \"TEH-ISF\"\r\n    for (var i = 0; i < newValue.length; i++) {\r\n      if (i === newValue.length - 1) str += newValue[i].CityAbbrevation;\r\n      else str += newValue[i].CityAbbrevation + \"-\";\r\n      ctId.push(newValue[i].CityId);\r\n    }\r\n    setOriginString(str);\r\n    setCityIdOrg(ctId);\r\n    //city orgId set in redux\r\n    props.dispatch(add_org_id(ctId));\r\n  }\r\n\r\n  function getOptionSelectedDestination(event, value) {\r\n    setValueDestination(value);\r\n    let str = \"\";\r\n    let ctId = [];\r\n    //destination data structure \"TEH-ISF\"\r\n    for (var i = 0; i < value.length; i++) {\r\n      if (i === value.length - 1) str += value[i].CityAbbrevation;\r\n      else str += value[i].CityAbbrevation + \"-\";\r\n      ctId.push(value[i].CityId);\r\n    }\r\n    setDestinationString(str);\r\n    setCityIdDes(ctId);\r\n    //city desId set in redux\r\n    props.dispatch(add_des_id(ctId));\r\n  }\r\n\r\n  //change destination and origin\r\n  function handleChangeOrgDes() {\r\n    let tempOrg = valueOrigin;\r\n    let tempDes = valueDestination;\r\n    let tempOrgStr = originString;\r\n    let tempDesStr = destinationString;\r\n    let tempOrgID = cityIdOrg;\r\n    let tempDesId = cityIdDes;\r\n    setCityIdOrg(tempDesId);\r\n    //city orgId set in redux\r\n    props.dispatch(add_org_id(tempDesId));\r\n    setCityIdDes(tempOrgID);\r\n    //city desId set in redux\r\n    props.dispatch(add_des_id(tempOrgID));\r\n    setOriginString(tempDesStr);\r\n    setDestinationString(tempOrgStr);\r\n    setValueOrigin(tempDes);\r\n    setValueDestination(tempOrg);\r\n  }\r\n\r\n  //make day and month 2 figit :07/05\r\n  var dateOrigin = 0;\r\n  var dateDestination = 0;\r\n  var zero = \"0\";\r\n\r\n  if (selectedDayOrg !== null) {\r\n    let orgD =\r\n      selectedDayOrg.day.toString().length === 1\r\n        ? zero\r\n          .toString()\r\n          .concat(selectedDayOrg.day.toString())\r\n          .toString()\r\n        : selectedDayOrg.day;\r\n    let orgM =\r\n      selectedDayOrg.month.toString().length === 1\r\n        ? `0${selectedDayOrg.month}`\r\n        : selectedDayOrg.month;\r\n    dateOrigin = selectedDayOrg.year + \"-\" + orgM + \"-\" + orgD;\r\n  }\r\n  if (selectedDayDes !== null) {\r\n    let desD =\r\n      selectedDayDes.day.toString().length === 1\r\n        ? `0${selectedDayDes.day}`\r\n        : selectedDayDes.day;\r\n    let desM =\r\n      selectedDayDes.month.toString().length === 1\r\n        ? `0${selectedDayDes.month}`\r\n        : selectedDayDes.month;\r\n    dateDestination = selectedDayDes.year + \"-\" + desM + \"-\" + desD;\r\n  }\r\n\r\n  const adultCount = inc1.reduce(function myFunc(a, b) {\r\n    return a + b;\r\n  });\r\n\r\n  var roomRules = \"\";\r\n  for (var i = 0; i < selValues.length; i++) {\r\n    let adult = selValues[i].adult;\r\n    let infant = 0;\r\n    let child1 = 0;\r\n    let child2 = 0;\r\n    \r\n    for (var j = 0; j < selValues[i].age.length; j++) {\r\n      if (selValues[i].age[j] === 0 || selValues[i].age[j] === 1) {\r\n        infant = infant + 1;\r\n      }\r\n      if (\r\n        selValues[i].age[j] === 2 ||\r\n        selValues[i].age[j] === 3 ||\r\n        selValues[i].age[j] === 4 ||\r\n        selValues[i].age[j] === 5\r\n        ) {\r\n          child1 = child1 + 1;\r\n        }\r\n        if (\r\n          selValues[i].age[j] === 6 ||\r\n          selValues[i].age[j] === 7 ||\r\n          selValues[i].age[j] === 8 ||\r\n          selValues[i].age[j] === 9 ||\r\n          selValues[i].age[j] === 10 ||\r\n          selValues[i].age[j] === 11\r\n          ) {\r\n            child2 = child2 + 1;\r\n          }\r\n        }\r\n        const einRoom = adult\r\n        .toString()\r\n        .concat(child1.toString(), child2.toString(), infant.toString());\r\n        if (roomRules === \"\")\r\n        roomRules = roomRules.concat(einRoom);\r\n        else roomRules = roomRules.concat(\",\", einRoom);\r\n      }\r\n      \r\n  const searchParams = {\r\n    org: originString,\r\n    des: destinationString,\r\n    adult: adultCount,\r\n    infant: infantCount,\r\n    child1: child1Count,\r\n    child2: child2Count,\r\n    selValues: JSON.stringify(selValues),\r\n    roomCount: rooms,\r\n    roomRules: roomRules.toString(),\r\n    orgDate: dateOrigin.toString(),\r\n    desDate: dateDestination.toString(),\r\n    tourCategory: tourCategory\r\n  };\r\n\r\n\r\n\r\n  if (!showChild) return <DotLoading />;\r\n  return (\r\n    <Fragment>\r\n      <div className=\"inputgroups\">\r\n        <Container>\r\n          <Row>\r\n            <Col md=\"6\" className=\"airport-col no-padding\">\r\n              <InputGroup>\r\n                <Autocomplete\r\n                  id=\"fixed-tags-demo\"\r\n                  className=\"airport-auto form-control\"\r\n                  multiple\r\n                  options={cityList}\r\n                  filterSelectedOptions={true}\r\n                  onChange={(event, newValue) => getOptionSelectedOrigin(event, newValue)}\r\n                  groupBy={option =>\r\n                    option.CountryAbbrevation === \"IR\"\r\n                      ? \"شهرهای پرتردد\"\r\n                      : \"سایر شهرها\"\r\n                  }\r\n                  getOptionLabel={option => (\r\n                    <div>\r\n                      <MdLens className=\"pl-1\" size=\"10\" color=\"#65bfbe\" />\r\n                      <span className=\"optionRight\">\r\n                        {option.CityTitle_Persian} \r\n                      </span>\r\n                      <span className=\"optionLeft-autocomplete\">\r\n                        {option.CityAbbrevation}\r\n                      </span>\r\n                    </div>\r\n                  )}\r\n                  renderTags={(newValue, getTagProps) =>\r\n                    newValue.map((option, index) => (\r\n                      <Chip\r\n                        label={option.CityTitle_Persian}\r\n                        {...getTagProps({ index })}\r\n                        key={index}\r\n                      />\r\n                    ))\r\n                  }\r\n                  style={{ width: \"100%\", fontFamily: \"IRANSansWeb\" }} style={{ width: 300 }}\r\n                  renderInput={params => <TextField {...params} variant=\"outlined\" fullWidth />}\r\n                />\r\n                <InputGroupAddon addonType=\"append\" className=\"airport-append\">\r\n                  <InputGroupText>\r\n                    <div className=\"source-plane\">\r\n                      <IoIosAirplane />\r\n                    </div>\r\n                    مبداٌ؟\r\n                  </InputGroupText>\r\n                </InputGroupAddon>\r\n              </InputGroup>\r\n\r\n              <Button onClick={handleChangeOrgDes} className=\"input-btn\">\r\n                <FaExchangeAlt />\r\n              </Button>\r\n              <InputGroup className=\"airport-dest\">\r\n                {/* <Input placeholder=\"شهر یا فرودگاه\" /> */}\r\n                <Autocomplete\r\n                  className=\"airport-auto form-control\"\r\n                  multiple\r\n                  filterSelectedOptions={true}\r\n                  id=\"fixed-tags-2\"\r\n                  options={cityList}\r\n                  onChange={(e, value) =>\r\n                    getOptionSelectedDestination(e, value)\r\n                  }\r\n                  groupBy={toption =>\r\n                    toption.CountryAbbrevation === \"IR\"\r\n                      ? \"شهرهای پرتردد\"\r\n                      : \"سایر شهرها\"\r\n                  }\r\n                  getOptionLabel={option => (\r\n                    <div>\r\n                      <MdLens className=\"pl-1\" size=\"10\" color=\"#65bfbe\" />\r\n                      <span className=\"optionRight\">\r\n                        {option.CityTitle_Persian}\r\n                      </span>\r\n                      <span className=\"optionLeft-autocomplete \">\r\n                        {option.CityAbbrevation}\r\n                      </span>\r\n                    </div>\r\n                  )}\r\n                  //defaultValue={[ top100Films[13]]}\r\n                 \r\n                  // getOptionSelected={getSelectedAus(value)}\r\n                  renderTags={(value, getTagProps) =>\r\n                    value.map((option, index) => (\r\n                      <Chip\r\n                        label={option.CityTitle_Persian}\r\n                        {...getTagProps({ index })}\r\n                        key={index}\r\n                      />\r\n                    ))\r\n                  }\r\n                  style={{ width: \"100%\", fontFamily: \"IRANSansWeb\" }}\r\n                  renderInput={params => (\r\n                    <TextField {...params} variant=\"outlined\" fullWidth />\r\n                  )}\r\n                />\r\n\r\n                <InputGroupAddon addonType=\"append\" className=\"airport-append\">\r\n                  <InputGroupText>\r\n                    <div className=\"dest-plane\">\r\n                      <IoIosAirplane />\r\n                    </div>\r\n                    مقصد؟\r\n                  </InputGroupText>\r\n                </InputGroupAddon>\r\n              </InputGroup>\r\n            </Col>\r\n            <Col md=\"6\" className=\"date-col no-padding\">\r\n              <InputGroup>\r\n                <InputGroupAddon addonType=\"append\">\r\n                  <InputGroupText>\r\n                    <div className=\"calendar-icon\">\r\n                      <FaRegCalendarAlt />\r\n                    </div>\r\n                    تاریخ رفت\r\n\r\n                    <DatePicker\r\n                      value={selectedDayOrg}\r\n                      onChange={setSelectedDayOrg}\r\n                      inputPlaceholder=\" \"\r\n                      shouldHighlightWeekends\r\n                      locale=\"fa\"\r\n                    />\r\n                  </InputGroupText>\r\n                </InputGroupAddon>\r\n              </InputGroup>\r\n              <InputGroup>\r\n                <InputGroupAddon addonType=\"append\">\r\n                  <InputGroupText>\r\n                    <div className=\"calendar-icon\">\r\n                      <FaRegCalendarAlt />\r\n                    </div>\r\n                    تاریخ برگشت\r\n                    <DatePicker\r\n                      value={selectedDayDes}\r\n                      onChange={setSelectedDayDes}\r\n                      inputPlaceholder=\" \"\r\n                      shouldHighlightWeekends\r\n                      locale=\"fa\"\r\n                    />\r\n                  </InputGroupText>\r\n                </InputGroupAddon>\r\n              </InputGroup>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </div>\r\n      <div className=\"search-dropdown\">\r\n        <Container>\r\n          <Row>\r\n            <Col md=\"6\" xs=\"6\">\r\n              <div className=\"tour-type right-to-left\">\r\n                <FormControl className={classes.formControl}>\r\n                  <InputLabel id=\"demo-controlled-open-select-label\">\r\n                    سبک تور\r\n                  </InputLabel>\r\n                  <Select\r\n                    labelId=\"demo-controlled-open-select-label\"\r\n                    id=\"demo-controlled-open-select\"\r\n                    open={open}\r\n                    onClose={handleClose}\r\n                    onOpen={handleOpen}\r\n                    value={tourCategory}\r\n                    onChange={handleChange}\r\n                  >\r\n                    <MenuItem value=\"\">\r\n                      <em>همه موارد</em>\r\n                    </MenuItem>\r\n                    <MenuItem value={10}>تفریحی</MenuItem>\r\n                    <MenuItem value={20}>طبیعت گردی</MenuItem>\r\n                    <MenuItem value={30}>زیارتی</MenuItem>\r\n                  </Select>\r\n                  <MdKeyboardArrowDown />\r\n                </FormControl>\r\n              </div>\r\n            </Col>\r\n            <Col md=\"6\" xs=\"6\">\r\n              <Rooms />\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </div>\r\n      <RoundButton\r\n        searchParams={searchParams}\r\n        name=\"جستجو\"\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\n\r\n\r\nexport default connect()(SearchBoxTour);\r\n"]},"metadata":{},"sourceType":"module"}